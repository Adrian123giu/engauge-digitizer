inherit qt5-qmake

VERSION=v10.7.1
SRC_URI_REMOTE="http://github.com/markummitchell/engauge-digitizer/archive/${VERSION}.zip"
SRC_DIR_REMOTE="engauge-digitizer-${VERSION}"
SRC_URI_LOCAL="/tmp/local.zip"
SRC_DIR_LOCAL="local"
SRC_URI=SRC_URI_LOCAL
SRC_DIR=SRC_DIR_LOCAL

NAME="engauge"
RELEASE=1
CATEGORY="Math"
LOG_DIR=/tmp
LOG4CPP_HOME=../../../log4cpp_null
FFTW_HOME=/usr
CYGQMAKE5_ARGS="CONFIG+=cygport CONFIG+=log4cpp_null"
S=../engauge.pro
SUMMARY="Convert graph images to numeric data"
DESCRIPTION="Engauge Digitizer digitizes images of graphs into numbers"
HOMEPAGE="http://github.com/engauge-digitizer"
PATCH_URI="
	engauge-no-undefined.patch
	engauge-webkit.patch
"

src_compile() {
	      cd ${B}
	      qt5_qmake_compile
	      cd ${S}/help
	      dos2unix build
	      build
	      cp -r ../bin/documentation ${B}/bin
}

src_install() {
	      dobin ${B}/bin/engauge.exe
	      cp -r ${B}/bin/documentation ${D}/usr/bin
}